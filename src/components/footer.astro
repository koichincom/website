<nav
    class="mt-8 flex flex-wrap items-center gap-4 sm:gap-6 text-base text-(--color-text-second) dark:text-(--color-text-second-dark)"
>
    <span class="relative group">
        <button
            id="copy-email"
            class="hover:text-(--color-accent-light) dark:hover:text-(--color-accent-dark) transition-colors duration-200 cursor-pointer"
            aria-label="Copy email address to clipboard"
            >Email</button
        >
        <span class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs bg-(--color-text-first) dark:bg-(--color-text-first-dark) text-(--color-background) dark:text-(--color-background-dark) rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap">
            Copy Email
        </span>
    </span>
    <a
        href="https://github.com/koichincom"
        target="_blank"
        rel="noopener noreferrer"
        class="hover:text-(--color-accent-light) dark:hover:text-(--color-accent-dark) transition-colors duration-200"
        >GitHub</a
    >
    <a
        href="https://x.com/koichincom"
        target="_blank"
        rel="noopener noreferrer"
        class="hover:text-(--color-accent-light) dark:hover:text-(--color-accent-dark) transition-colors duration-200"
        >Twitter</a
    >
    <a
        href="https://linkedin.com/in/koichincom/"
        target="_blank"
        rel="noopener noreferrer"
        class="hover:text-(--color-accent-light) dark:hover:text-(--color-accent-dark) transition-colors duration-200"
        >LinkedIn</a
    >
    <button
        id="shortcuts-button"
        class="ml-auto hidden sm:block hover:text-(--color-accent-light) dark:hover:text-(--color-accent-dark) transition-colors duration-200"
    >
        ? for Shortcuts
    </button>
</nav>

<script>
    import { getNotyf } from "../utils/notyf";

    function handleEmailCopy() {
        navigator.clipboard.writeText("hello@koichin.com");
        getNotyf().success("Email Copied");
    }

    function initEmailCopy() {
        const emailButton = document.getElementById("copy-email");
        if (emailButton) {
            // Remove old listener if exists to prevent duplicates
            emailButton.removeEventListener("click", handleEmailCopy);
            emailButton.addEventListener("click", handleEmailCopy);
        }
    }

    // Initialize on page load
    initEmailCopy();

    // Re-initialize after View Transitions
    document.addEventListener("astro:page-load", initEmailCopy);

    function handleShortcutsClick() {
        // Dispatch a custom event that the Vim help modal listens for
        document.dispatchEvent(new Event('open-vim-help'));
    }

    function initShortcuts() {
        const shortcutsButton = document.getElementById("shortcuts-button");
        if (shortcutsButton) {
            shortcutsButton.removeEventListener("click", handleShortcutsClick);
            shortcutsButton.addEventListener("click", handleShortcutsClick);
        }
    }

    initShortcuts();

    document.addEventListener("astro:page-load", initShortcuts);
</script>
