@import "tailwindcss";
@plugin "@tailwindcss/typography";

@theme {
    --color-background: #f1f1f1;
    --color-hover: #e5e5e5;
    --color-divider: #d4d4d4;
    --color-text-first: #171717;
    --color-text-second: #333333;
    --color-text-third: #666666;
    --color-accent-light: #eb6101;

    --color-background-dark: #111111;
    --color-hover-dark: #262626;
    --color-divider-dark: #2f2f2f;
    --color-text-first-dark: #f1f1f1;
    --color-text-second-dark: #e5e5e5;
    --color-text-third-dark: #9e9e9e;
    --color-accent-dark: #eb6101;

    --spacing-inline-edge: calc(var(--spacing) * 3);
    --spacing-content-inset: var(--spacing-inline-edge);
    --spacing-surface-inset: var(--spacing-inline-edge);
    --spacing-list-divider-inset: var(--spacing-content-inset);
}

@theme inline {
    --font-sans: var(--font-iosevka-aile);
}

@layer base {
    html {
        overscroll-behavior-y: none;
    }

    main a:not(.no-underline) {
        @apply hover:text-accent-light dark:hover:text-accent-dark;
        text-decoration: none;
        border-bottom: 1.75px solid currentColor;
        padding-bottom: 0;
    }

    /* light/dark mode for code blocks, using Astro's built-in Shiki syntax highlighting */
    /* https://docs.astro.build/en/guides/syntax-highlighting/ */
    @media (prefers-color-scheme: dark) {
        .astro-code,
        .astro-code span {
            color: var(--shiki-dark) !important;
            background-color: var(--shiki-dark-bg) !important;
            font-style: var(--shiki-dark-font-style) !important;
            font-weight: var(--shiki-dark-font-weight) !important;
            text-decoration: var(--shiki-dark-text-decoration) !important;
        }
    }

    .code-block {
        margin: 1.5rem 0;
        border: 1px solid var(--color-divider);
        border-radius: 0.75rem;
        overflow: hidden;
    }

    .code-block > pre.astro-code {
        margin: 0 !important;
        border-radius: 0 !important;
    }

    .code-block > pre.astro-code code {
        border-radius: 0 !important;
    }

    .code-block__header {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 0.75rem;
        border-bottom: 1px solid var(--color-divider);
        background-color: var(--color-hover);
        color: var(--color-text-second);
        font-size: 0.875rem;
        line-height: 1.25rem;
    }

    .code-block__filename {
        font-weight: 600;
    }

    .code-block__language {
        border: 1px solid var(--color-divider);
        border-radius: 9999px;
        padding: 0.125rem 0.5rem;
        font-size: 0.75rem;
        line-height: 1rem;
        color: var(--color-text-third);
        background-color: var(--color-background);
    }

    .code-block__copy {
        margin-left: auto;
        border: 1px solid var(--color-divider);
        border-radius: 0.375rem;
        padding: 0.125rem 0.5rem;
        font-size: 0.75rem;
        line-height: 1rem;
        color: var(--color-text-second);
        background-color: var(--color-background);
        cursor: pointer;
    }

    .code-block__copy:hover {
        color: var(--color-accent-light);
    }

    .code-block__copy:focus-visible {
        outline: 2px solid var(--color-accent-light);
        outline-offset: 2px;
    }

    @media (prefers-color-scheme: dark) {
        .code-block {
            border-color: var(--color-divider-dark);
        }

        .code-block__header {
            border-bottom-color: var(--color-divider-dark);
            background-color: var(--color-hover-dark);
            color: var(--color-text-second-dark);
        }

        .code-block__language,
        .code-block__copy {
            border-color: var(--color-divider-dark);
            color: var(--color-text-third-dark);
            background-color: var(--color-background-dark);
        }

        .code-block__copy:hover {
            color: var(--color-accent-dark);
        }

        .code-block__copy:focus-visible {
            outline-color: var(--color-accent-dark);
        }
    }
}
