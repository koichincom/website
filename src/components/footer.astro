<nav
    class="mt-8 flex flex-wrap items-center gap-4 sm:gap-6 text-base text-(--color-text-second) dark:text-(--color-text-second-dark)"
>
    <a
        href="https://x.com/koichincom"
        target="_blank"
        rel="noopener noreferrer"
        class="hover:text-(--color-accent-light) dark:hover:text-(--color-accent-dark) transition-colors duration-200"
        >X (Twitter)</a
    >
    <a
        href="https://github.com/koichincom"
        target="_blank"
        rel="noopener noreferrer"
        class="hover:text-(--color-accent-light) dark:hover:text-(--color-accent-dark) transition-colors duration-200"
        >GitHub</a
    >
    <a
        href="https://linkedin.com/in/koichincom/"
        target="_blank"
        rel="noopener noreferrer"
        class="hover:text-(--color-accent-light) dark:hover:text-(--color-accent-dark) transition-colors duration-200"
        >LinkedIn</a
    >
    <button
        id="copy-email"
        type="button"
        class="hover:text-(--color-accent-light) dark:hover:text-(--color-accent-dark) transition-colors duration-200"
        >Email</button
    >
    <a
        href="https://signal.me/#eu/hFxJqhdUe_9zSwQs01xjuf6sz9n5Zag3yfHQzxGwPZPL-X863I9DF5QXch7gCsUv"
        target="_blank"
        rel="noopener noreferrer"
        class="hover:text-(--color-accent-light) dark:hover:text-(--color-accent-dark) transition-colors duration-200"
        >Signal</a
    >
    <button
        id="shortcuts-button"
        class="ml-auto hidden sm:block hover:text-(--color-accent-light) dark:hover:text-(--color-accent-dark) transition-colors duration-200"
    >
        ? for Shortcuts
    </button>
</nav>

<script>
    let copyTimeout: ReturnType<typeof setTimeout>;

    function handleEmailCopy(event: MouseEvent) {
        const emailButton = event.currentTarget as HTMLButtonElement;
        const originalText = "Email";
        const accentClasses = ["text-(--color-accent-light)", "dark:text-(--color-accent-dark)"];

        navigator.clipboard.writeText("k@koichin.com");

        if (copyTimeout) clearTimeout(copyTimeout);

        emailButton.textContent = "Copied!";
        emailButton.classList.add(...accentClasses);

        copyTimeout = setTimeout(() => {
            emailButton.textContent = originalText;
            emailButton.classList.remove(...accentClasses);
        }, 3000);
    }

    function initEmailCopy() {
        const emailButton = document.getElementById("copy-email");
        if (emailButton) {
            emailButton.removeEventListener("click", handleEmailCopy);
            emailButton.addEventListener("click", handleEmailCopy);
        }
    }

    function handleShortcutsClick() {
        document.dispatchEvent(new Event('open-shortcuts'));
    }

    function initShortcuts() {
        const shortcutsButton = document.getElementById("shortcuts-button");
        if (shortcutsButton) {
            shortcutsButton.removeEventListener("click", handleShortcutsClick);
            shortcutsButton.addEventListener("click", handleShortcutsClick);
        }
    }

    initEmailCopy();
    initShortcuts();

    document.addEventListener("astro:page-load", () => {
        initEmailCopy();
        initShortcuts();
    });
</script>
