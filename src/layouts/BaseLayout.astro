---
import { Font } from "astro:assets";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import "../styles/global.css";

export interface Props {
    title: string;
    makeTitle?: boolean;
    description?: string;
}
const {
    title = "Koichi Nakayamada",
    makeTitle = true,
    description,
} = Astro.props;
const seoTitle = makeTitle ? `${title} | Koichi Nakayamada` : title;

const siteUrl = "https://koichin.com" + Astro.url.pathname;
const rssUrl = Astro.site ? new URL("/rss/", Astro.site).toString() : "/rss/";
const atomUrl = Astro.site
    ? new URL("/atom/", Astro.site).toString()
    : "/atom/";

// Global container class
const containerClass =
    "flex-1 flex flex-col max-w-5xl w-full mx-auto px-4 sm:px-6 lg:px-8";
---

<html lang="en" transition:animate="none">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width" />
        <meta name="generator" content={Astro.generator} />
        <meta name="description" content={description} />
        <title>{seoTitle}</title>

        <meta property="og:title" content={seoTitle} />
        <meta property="og:description" content={description} />
        <meta property="og:url" content={siteUrl} />
        <meta property="og:type" content="website" />

        <meta name="x:card" content="summary_large_image" />
        <meta name="x:title" content={seoTitle} />
        <meta name="x:description" content={description} />
        <meta name="x:creator" content="@koichincom" />

        <link rel="canonical" href={siteUrl} />
        <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg" />

        <!-- RSS first, then Atom -->
        <link
            rel="alternate"
            type="application/atom+xml"
            title="Koichi Nakayamada Atom"
            href={atomUrl}
        />
        <link
            rel="alternate"
            type="application/rss+xml"
            title="Koichi Nakayamada RSS"
            href={rssUrl}
        />

        <Font cssVariable="--font-iosevka-aile" preload />
    </head>
    <body
        class="bg-(--color-background) dark:bg-(--color-background-dark) text-(--color-text-first) dark:text-(--color-text-first-dark) text-base flex flex-col min-h-screen"
    >
        <a
            href="#main-content"
            class="sr-only focus:not-sr-only focus:fixed focus:top-4 focus:left-4 focus:z-50 focus:bg-(--color-background) dark:focus:bg-(--color-background-dark) focus:text-(--color-text-first) dark:focus:text-(--color-text-first-dark) focus:px-4 focus:py-2 focus:rounded focus:shadow"
        >
            Skip to content
        </a>

        <div class={containerClass}>
            <Header />

            <main id="main-content" class="flex-1 pt-8 sm:pt-6 lg:pt-5 pb-8">
                <h1
                    class="mt-0 text-2xl sm:text-3xl font-bold mb-8 text-(--color-text-first) dark:text-(--color-text-first-dark)"
                >
                    {title}
                </h1>
                <slot />
            </main>

            <footer>
                <Footer />
            </footer>
        </div>
    </body>
</html>
