---
import { ViewTransitions } from "astro:transitions";
import Header from "../components/header.astro";
import Footer from "../components/footer.astro";
import Shortcuts from "../components/shortcuts.astro";
import "../styles/global.css";
export interface Props {
    title?: string;
    h1?: string;
    description?: string;
}
const { title = "Koichi's Website" } = Astro.props;
const { h1 } = Astro.props;
const { description = "Koichi Nakayamada's personal website and writing" } =
    Astro.props;
const siteUrl = "https://koichin.com" + Astro.url.pathname;
---

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width" />
        <meta name="generator" content={Astro.generator} />
        <meta name="description" content={description} />
        <title>{title}</title>

        <!-- Google Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Lora:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap"
            rel="stylesheet"
        />

        <!-- Open Graph Tags -->
        <meta property="og:title" content={title} />
        <meta property="og:description" content={description} />
        <meta property="og:url" content={siteUrl} />
        <meta property="og:type" content="website" />

        <!-- Twitter Card Tags -->
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:title" content={title} />
        <meta name="twitter:description" content={description} />
        <meta name="twitter:creator" content="@koichincom" />

        <!-- Canonical URL -->
        <link rel="canonical" href={siteUrl} />

        <!-- RSS Feed -->
        <link
            rel="alternate"
            type="application/rss+xml"
            title="Koichi's Writing"
            href="/rss.xml"
        />

        <!-- View Transitions -->
        <ViewTransitions />

        <!-- Custom transition styles -->
        <style is:global>
            /* Smooth fade transition */
            ::view-transition-old(root),
            ::view-transition-new(root) {
                animation-duration: 0.2s;
            }

            /* Reduce motion for accessibility */
            @media (prefers-reduced-motion: reduce) {
                ::view-transition-old(root),
                ::view-transition-new(root) {
                    animation-duration: 0.01s;
                }
            }
        </style>
    </head>
    <body
        class="bg-(--color-background) dark:bg-(--color-background-dark) text-(--color-text-first) dark:text-(--color-text-first-dark) font-sans"
    >
        <Shortcuts id="shortcuts-modal" transition:persist />
        <div
            class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-6 lg:py-5"
        >
            <Header transition:persist />
            <div class="h-14 sm:h-16" aria-hidden="true"></div>
            {
                h1 && (
                    <h1 class="mt-0 text-2xl sm:text-3xl font-bold mb-8 text-(--color-text-first) dark:text-(--color-text-first-dark)">
                        {h1}
                    </h1>
                )
            }
            <slot />
            <div class="relative">
                <Footer transition:persist />
            </div>
        </div>
        <script>
            import { initVimBindings } from "../scripts/vim";
            initVimBindings();

            document.addEventListener("astro:page-load", () => {
                if (window.location.pathname !== "/") {
                    // @ts-ignore
                    window.hasVisitedInternal = true;
                }
            });
        </script>
    </body>
</html>
