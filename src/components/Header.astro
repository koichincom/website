---
import Logo from "./Logo.astro";

type TopLevelPath = "home" | "writing" | "project" | "about";

interface NavItem {
    path: TopLevelPath;
    href: string;
    label: string;
}

const navItems: NavItem[] = [
    { path: "writing", href: "/writing", label: "Writing" },
    { path: "project", href: "/project", label: "Projects" },
    { path: "about", href: "/about", label: "About" },
];

const pathname = Astro.url.pathname;

function getCurrentTopLevelPath(): TopLevelPath | null {
    if (pathname === "/") return "home";
    if (pathname === "/writing") return "writing";
    if (pathname === "/project") return "project";
    if (pathname === "/about") return "about";
    return null;
}

const currentPath = getCurrentTopLevelPath();
---

<header
    class="sticky inset-x-0 top-0 z-50 h-18 sm:h-22 bg-(--color-background) dark:bg-(--color-background-dark)"
>
    <nav
        class="h-full max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between text-base text-(--color-text-second) dark:text-(--color-text-second-dark) whitespace-nowrap"
    >
        <div class="flex gap-4 sm:gap-6">
            <div class="py-2">
                {
                    currentPath === "home" ? (
                        <span class="inline-flex items-center gap-2 sm:gap-3 text-(--color-text-second) dark:text-(--color-text-second-dark)">
                            <Logo class="h-4 w-auto" />
                            <span class="text-base sm:text-lg">
                                Koichi Nakayamada
                            </span>
                        </span>
                    ) : (
                        <a
                            href="/"
                            class="inline-flex items-center gap-2 sm:gap-3 text-(--color-text-second) dark:text-(--color-text-second-dark) hover:text-(--color-accent-light) dark:hover:text-(--color-accent-dark)"
                        >
                            <Logo class="h-4 w-auto" />
                            <span class="text-base sm:text-lg">
                                Koichi Nakayamada
                            </span>
                        </a>
                    )
                }
            </div>
        </div>

        <div class="flex gap-4 sm:gap-6">
            {
                navItems.map((item) => (
                    <div class="py-2">
                        {currentPath === item.path ? (
                            <span class="text-(--color-text-second) dark:text-(--color-text-second-dark)">
                                {item.label}
                            </span>
                        ) : (
                            <a
                                href={item.href}
                                class="underline decoration-transparent underline-offset-4 hover:decoration-current hover:text-(--color-accent-light) dark:hover:text-(--color-accent-dark)"
                            >
                                {item.label}
                            </a>
                        )}
                    </div>
                ))
            }
        </div>
    </nav>
</header>
